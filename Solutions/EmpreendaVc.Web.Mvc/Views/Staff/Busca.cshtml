@model EmpreendaVc.Web.Mvc.Controllers.ViewModels.StaffFiltroView
@using EmpreendaVc.Web.Mvc.Util
@using MvcContrib
@using MvcContrib.FluentHtml
@{
    ViewBag.Title = "Home";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var clube = (EmpreendaVc.Domain.Clube)ViewBag.Clube;
    var lst = (IList<EmpreendaVc.Domain.Staff>)ViewBag.Resultado;
    var page = (int)ViewBag.Page;
}
<h2>
    Buscar</h2>
@{ Html.RenderAction("Index", "Mensagem"); }
@using (Html.BeginForm())
{
    Html.AntiForgeryToken();
    <div id="busca-filtro">
        Tipo de profissional: @this.Select("Tipo").Options(Util.RetornaListaStaffTipo()).FirstOption("TODOS").Selected(Model.Tipo != 0 ? Model.Tipo.ToString() : "") 
        <input type="submit" class="submit" value="Buscar" />
    </div>
}
<div id="left">
    <div id="jogador-tabela">
        <table class="classificacao" cellpadding="0" cellspacing="0">
            <tr>
                <th width="60%">NOME</th>
                <th width="20%">TIPO</th>
                <th width="20%">REPUTAÇÃO</th>
            </tr>
            @if (lst.Count() > 0)
            {
                foreach (var item in lst)
                {
                    var nota = Convert.ToInt32(Math.Ceiling((decimal)item.H / 20));
                    <tr>
                        <td style="text-align: left;"><a href="@Url.Action("Index", "Staff", new { id = item.Id })">@item.Nome.ToUpper()</a></td>
                        <td>@Util.RetornaStaffTipo(item.Tipo)</td>
                        <td>
                            <a title="@Util.RetornaStaffReputacao(nota)">
                                <img src="@Url.Content("~/Content/img/star." + nota + ".png")" />
                            </a>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="6"><i>Nenhum profissional listado.</i></td>
                </tr>
            }
        </table>
        @if (page > 1)
        {
            <a href="@Url.Action("Busca", "Staff", new { p = (page - 1) } )">Página anterior</a> 
            @:-
        }
        @if (lst.Count() == 40)
        {
            <a href="@Url.Action("Busca", "Staff", new { p = (page + 1) })">Próxima página</a>
        }
    </div>
</div>
<div id="right">
    <div id="jogador-lista" class="caixa">
        <h1>
            Opções</h1>
        <a><b>Buscar</b></a><br />
    </div>
    @{ Html.RenderAction("_Menu", "Clube"); }
</div>
