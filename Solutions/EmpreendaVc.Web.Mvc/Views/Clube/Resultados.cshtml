@model IEnumerable<EmpreendaVc.Domain.Partida>
@using EmpreendaVc.Web.Mvc.Util
@{
    ViewBag.Title = "Plantel";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var lstdivisao = (List<EmpreendaVc.Domain.Divisao>)ViewBag.lstDivisao;
    var clube = (EmpreendaVc.Domain.Clube)ViewBag.Clube;
    var competicao = ViewBag.Competicao.ToString();
    var divisao = (int)ViewBag.Divisao;
    var rodada = ViewBag.Rodada.ToString();
    var rodadanum = (int)ViewBag.RodadaNum;
    var mao = 1;
}
<h2>@competicao - @rodada</h2>
<div id="resultados-lista" class="caixa">
    <h1>Competições</h1>
    <a href="@Url.Action("Resultados", "Clube", new { taca = 1 })" >TAÇA</a><br />
        @foreach (var div in lstdivisao)
        {
            if (div.Id == divisao)
            {
                <a><b>@div.Nome</b></a><br />
            }
            else
            {
                <a href="@Url.Action("Resultados", "Clube", new { divisao = div.Id })" >@div.Nome</a><br />
            }
        }
</div>

<div id="resultados-tabela">
    @if (Model.Count() > 0)
    {
        foreach (var item in Model)
        {
            mao = item.Mao;
            <table class="classificacao" cellpadding="0" cellspacing="0">
                <tr>
                    <th style="text-align: right;" width="30%">
                        @if (item.Vencedor != null && item.Vencedor.Id == item.Clube1.Id) {
                            <b>@item.Clube1.Nome</b>
                        }
                        else {
                            @item.Clube1.Nome
                        }
                    </th>
                    <th style="text-align: right;" width="10%">
                        @if (mao == 2 && !string.IsNullOrEmpty(item.Penalti) && item.Vencedor.Id == item.Clube1.Id) {
                            @: <a title="@item.Penalti">p</a>&nbsp;&nbsp;&nbsp;
                        }
                        @item.Gol1                            
                    </th>
                    <th width="5%">
                        X
                    </th>
                    <th style="text-align: left;" width="10%">
                        @item.Gol2 

                        @if (mao == 2 && !string.IsNullOrEmpty(item.Penalti) && item.Vencedor.Id == item.Clube2.Id)
                        {
                            @: &nbsp;&nbsp;&nbsp;<a title="@item.Penalti">p</a>
                        } 
                    </th>
                    <th style="text-align: left;" width="30%">
                        @if (item.Vencedor != null && item.Vencedor.Id == item.Clube2.Id)
                        {
                            <b>@item.Clube2.Nome</b>
                        }
                        else {
                            @item.Clube2.Nome
                        }
                    </th>
                    <th width="15%">
                        @item.Publico.ToString("N0")
                    </th>
                </tr>
                <tr>
                    <td colspan="2" style="text-align: right; vertical-align: top;">
                        @foreach (var gol in item.Gols1)
                        {
                            @: @gol.Jogador.Nome @gol.Minuto'<br />
                        }
                    </td>
                    <td></td>
                    <td colspan="2" style="text-align: left; vertical-align: top;">
                        @foreach (var gol in item.Gols2)
                        {
                            @: @gol.Jogador.Nome @gol.Minuto'<br />
                        }
                    </td>
                    <td></td>
                </tr>
            </table>
        }
    }
    else
    {
        <p>Nenhum resultado disponível.</p>
    }    

    @if (divisao > 0)
    {
        if (rodadanum > 1)
        { <a href="@Url.Action("Resultados", "Clube", new { divisao = divisao, rodada = rodadanum - 1 })" >Rodada anterior</a><text> -</text>  }
        if (rodadanum < 22)
        { <a href="@Url.Action("Resultados", "Clube", new { divisao = divisao, rodada = rodadanum + 1 })" >Próxima rodada</a> }
    }
    else
    {
        if (rodadanum < 16 || (rodadanum == 16 && mao == 2))
        { <a href="@Url.Action("Resultados", "Clube", new { taca = 1, rodada = mao == 1 ? (rodadanum * 2) : rodadanum, mao = mao == 1 ? 2 : 1 })" >Fase anterior</a><text> -</text>  }
        if (rodadanum > 1 || (rodadanum == 1 && mao == 1))
        { <a href="@Url.Action("Resultados", "Clube", new { taca = 1, rodada = mao == 1 ? (rodadanum / 2) : rodadanum, mao = mao == 1 ? 2 : 1 })" >Próxima fase</a> } 
    }
</div>

@{ Html.RenderAction("_Menu", "Clube"); }